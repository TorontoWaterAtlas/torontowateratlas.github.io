---
export interface Props {
  videoSrc: string;
}

const { videoSrc } = Astro.props;
---

<section class="relative h-screen w-full overflow-hidden md:-mt-[76px]">
  <video
    id="hero-video"
    autoplay
    muted
    loop
    playsinline
    class="absolute inset-0 w-full h-full object-cover"
  >
    <source src={videoSrc} type="video/mp4" />
  </video>

  <!-- Sound Toggle Button -->
  <button
    id="sound-toggle"
    class="absolute bottom-24 md:bottom-20 left-4 md:left-8 z-10 p-3 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-colors"
    aria-label="Toggle sound"
  >
    <svg id="icon-muted" class="w-5 h-5 md:w-6 md:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" />
    </svg>
    <svg id="icon-unmuted" class="w-5 h-5 md:w-6 md:h-6 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
    </svg>
  </button>

  <!-- Video Credit -->
  <p class="absolute bottom-24 md:bottom-20 right-4 md:right-8 left-20 md:left-auto z-10 text-white/70 text-xs md:text-sm text-right">
    Animation by Reena Devani
  </p>
</section>

<script>
  const video = document.getElementById('hero-video') as HTMLVideoElement;
  const toggleBtn = document.getElementById('sound-toggle');
  const iconMuted = document.getElementById('icon-muted');
  const iconUnmuted = document.getElementById('icon-unmuted');

  toggleBtn?.addEventListener('click', () => {
    video.muted = !video.muted;
    iconMuted?.classList.toggle('hidden');
    iconUnmuted?.classList.toggle('hidden');
  });
</script>
